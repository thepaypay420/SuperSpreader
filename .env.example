### Trading mode (LIVE IS DISABLED BY DEFAULT)
TRADE_MODE=paper

### Execution mode
# - paper: places paper orders and simulates fills
# - shadow: logs/stores "would place/cancel" only (no fills, PnL stays flat)
EXECUTION_MODE=paper

### Data mode: live uses Polymarket APIs; backtest replays tape from SQLite
RUN_MODE=paper   # scanner|paper|backtest

### Polymarket credentials (only needed for live trading / authenticated endpoints)
POLYMARKET_HOST=https://clob.polymarket.com
POLYMARKET_WS=wss://ws-subscriptions-clob.polymarket.com/ws/market
# Feed mode:
# - mock: synthetic feed (works offline)
# - gamma: polls gamma-api for bestBid/bestAsk (stable “live-ish”)
# - ws: raw websocket feed (endpoint/protocol may change)
POLYMARKET_FEED=gamma
USE_LIVE_WS_FEED=0
POLYMARKET_CHAIN_ID=137
POLYMARKET_PRIVATE_KEY=
POLYMARKET_API_KEY=
POLYMARKET_API_SECRET=
POLYMARKET_API_PASSPHRASE=

### Market selection
TOP_N_MARKETS=50
MIN_24H_VOLUME_USD=20000
MIN_LIQUIDITY_USD=5000
MARKET_REFRESH_SECS=60

### Strategy knobs
EDGE_BUFFER=0.01
FEES_BPS=20
SLIPPAGE_BPS=10
LATENCY_BPS=5
BASE_ORDER_SIZE=10
MIN_TRADE_COOLDOWN_SECS=5

# Minimum price increment used for quoting/rounding.
# Polymarket often trades in 0.001 increments.
PRICE_TICK=0.001

MM_QUOTE_WIDTH=0.01
MM_INVENTORY_SKEW=0.5
MM_MIN_QUOTE_LIFE_SECS=1
MM_MAX_ORDERS_PER_MARKET=2
# If true, quotes will be pulled toward the touch (more fills / more churn).
MM_JOIN_TOUCH=1
# Reprice threshold in price units (default 0.001 ~ 1 tick).
MM_REPRICE_THRESHOLD=0.001

### Strategy toggles
# Cross-venue FV requires a real external odds model; default is mock.
ENABLE_CROSS_VENUE=0

### Paper trading realism (optional)
# Default is "maker_touch" so market-making can actually trade on TOB-only feeds (gamma poll).
# - maker_touch: simulate passive fills when you're at the touch and the touch moves away
# - on_book_cross: only fills when TOB crosses your limit (taker-ish; maker quotes rarely fill)
# - trade_through: fills on trade prints through your price (requires a trades feed)
PAPER_FILL_MODEL=maker_touch   # maker_touch|on_book_cross|trade_through
PAPER_MIN_REST_SECS=0

# Paper state persistence / restart behavior
# - PAPER_REHYDRATE_PORTFOLIO=1 (default): on restart, rebuild in-memory positions from SQLite snapshots
# - PAPER_RESET_ON_START=1: wipe orders/fills/position snapshots/PnL on startup (paper mode only)
PAPER_REHYDRATE_PORTFOLIO=1
PAPER_RESET_ON_START=0

### Risk limits
MAX_POS_PER_MARKET=200
MAX_OPEN_POSITIONS=0          # 0 disables; otherwise blocks opening new markets once reached
MAX_POS_AGE_SECS=0            # 0 disables; otherwise auto-unwinds positions older than this
UNWIND_INTERVAL_SECS=10
UNWIND_MAX_MARKETS_PER_CYCLE=2
MAX_EVENT_EXPOSURE=500
DAILY_LOSS_LIMIT=200
KILL_SWITCH=0
STOP_BEFORE_END_SECS=3600

### Circuit breaker
# Max age of the last top-of-book before risk blocks quoting.
# Note: WS feeds can be quiet per-market for long stretches; leaving this blank lets the app
# choose a feed-appropriate default (currently ~300s for POLYMARKET_FEED=ws, ~5s otherwise).
MAX_FEED_LAG_SECS=
MAX_SPREAD=0.20

### Storage / logs
# Keep SQLite under the project directory (portable across Windows/macOS/Linux)
SQLITE_PATH=./data/polymarket_trader.sqlite
LOG_LEVEL=INFO
JSON_LOGS=1
LOG_FILE=
LOG_MAX_BYTES=10000000
LOG_BACKUP_COUNT=5

### Optional: publish telemetry to GitHub (Gist)
GITHUB_PUBLISH_ENABLED=0
# GH_TOKEN or GITHUB_TOKEN must be set for publishing
GH_TOKEN=
# Optional: if GITHUB_GIST_ID is blank, the app will create a gist and persist its ID here,
# so subsequent runs keep updating the same gist.
GITHUB_GIST_ID_FILE=./data/github_gist_id.txt
GITHUB_GIST_ID=
GITHUB_PUBLISH_INTERVAL_SECS=60
GITHUB_PUBLISH_LOG_TAIL_LINES=200

### Optional: publish telemetry into a repo file (creates commits)
GITHUB_REPO_PUBLISH_ENABLED=0
# owner/name, e.g. thepaypay420/SuperSpreader
GITHUB_REPO=
GITHUB_REPO_BRANCH=main
# file path inside repo to overwrite each interval
GITHUB_REPO_PATH=ops/telemetry/latest.md
GITHUB_REPO_COMMIT_PREFIX=telemetry

### Local web dashboard
# Served alongside the app at http://DASHBOARD_HOST:DASHBOARD_PORT
DASHBOARD_ENABLED=1
DASHBOARD_HOST=127.0.0.1
DASHBOARD_PORT=8000
# Auto-opens your default browser on start
DASHBOARD_OPEN_BROWSER=1

# Optional (paper-only): enable a "Reset paper state" button in the dashboard UI.
# This deletes orders/fills/position snapshots/PnL from SQLite.
DASHBOARD_ENABLE_RESET=0

### Backtest
BACKTEST_SPEED=50.0
BACKTEST_START_TS=
BACKTEST_END_TS=
